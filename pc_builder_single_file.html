<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple PC Builder</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#94a3b8; --accent:#7c3aed; --glass: rgba(255,255,255,0.04);
      --success: #10b981; --danger:#ef4444;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0; min-height:100vh; background:linear-gradient(180deg,#071024 0%, #081226 50%); color:#e6eef8}
    .wrap{max-width:1200px;margin:32px auto;padding:20px}

    header{display:flex;gap:16px;align-items:center;justify-content:space-between}
    header .brand{display:flex;gap:12px;align-items:center}
    .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#2563eb);display:flex;align-items:center;justify-content:center;font-weight:700}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted)}

    .grid{display:grid;grid-template-columns:1fr 380px;gap:20px;margin-top:20px}

    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.6)}
    .components{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}
    .part{background:var(--glass);padding:10px;border-radius:10px}
    .part h3{margin:0;font-size:14px}
    .part select, .part button{width:100%;margin-top:8px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
    .part .meta{font-size:12px;color:var(--muted);margin-top:6px}

    .sidebar{position:sticky;top:24px}
    .summary{display:flex;flex-direction:column;gap:10px}
    .summary .line{display:flex;justify-content:space-between;align-items:center}
    .total{font-size:18px;font-weight:700}

    .btn{display:inline-block;padding:10px 12px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),#2563eb);color:white;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}

    .list{margin-top:12px;border-radius:8px;padding:8px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent)}
    .list .item{display:flex;justify-content:space-between;padding:8px;border-radius:6px}
    .small{font-size:13px;color:var(--muted)}

    footer{margin-top:20px;text-align:center;color:var(--muted);font-size:13px}

    /* responsive */
    @media (max-width:900px){.grid{grid-template-columns:1fr}.sidebar{position:static}}

    /* tiny helper badges */
    .badge{display:inline-block;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.03);font-size:12px}

    /* compatibility warning */
    .warn{color:var(--danger);font-weight:600}
    .ok{color:var(--success);font-weight:600}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">PC</div>
        <div>
          <h1>PC Builder — Simple</h1>
          <p class="lead">اختار مكوّنات، شوف التوافق والسعر الكلّي فورًا</p>
        </div>
      </div>
      <div>
        <button class="btn" id="saveBtn">Save Build</button>
        <button class="btn ghost" id="resetBtn">Reset</button>
      </div>
    </header>

    <main class="grid">
      <section>
        <div class="card">
          <h2 style="margin:0 0 8px 0">Components</h2>
          <div class="components" id="components"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <h2 style="margin:0 0 8px 0">Notes & Compatibility</h2>
          <div id="notes" class="small">No notes yet.</div>
        </div>

        <div class="card" style="margin-top:12px">
          <h2 style="margin:0 0 8px 0">Export / Import</h2>
          <div style="display:flex;gap:8px">
            <button class="btn" id="exportBtn">Export JSON</button>
            <input id="importInput" placeholder="Paste JSON and press Import" style="flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit">
            <button class="btn ghost" id="importBtn">Import</button>
          </div>
          <p class="small" style="margin-top:8px">You can save builds locally, or export the JSON to share.</p>
        </div>
      </section>

      <aside class="sidebar">
        <div class="card summary">
          <h2 style="margin:0">Build Summary</h2>
          <div class="list" id="selectedList"></div>
          <div class="line"><div class="small">Subtotal</div><div id="subtotal">$0</div></div>
          <div class="line"><div class="small">Estimated Tax (14%)</div><div id="tax">$0</div></div>
          <div class="line total"><div>Total</div><div id="total">$0</div></div>

          <div style="display:flex;gap:8px;margin-top:10px">
            <button class="btn" id="checkoutBtn">Checkout</button>
            <button class="btn ghost" id="shareBtn">Copy JSON</button>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 style="margin:0">Quick Presets</h3>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn ghost" data-preset="budget">Budget</button>
            <button class="btn ghost" data-preset="mid">Mid-Range</button>
            <button class="btn ghost" data-preset="high">High-End</button>
          </div>
        </div>
      </aside>
    </main>

    <footer>Made with ♥ — edit the single HTML file to customize. Want RTL Arabic labels or currency in EGP? أقولك!</footer>
  </div>

  <script>
    // Sample data set - replace or extend
    const DATA = {
      cpus: [
        {id:'cpu1', name:'Intel Core i5-12400F', socket:'LGA1700', price:180, tdp:65},
        {id:'cpu2', name:'Intel Core i7-12700K', socket:'LGA1700', price:380, tdp:125},
        {id:'cpu3', name:'AMD Ryzen 5 5600X', socket:'AM4', price:200, tdp:65},
        {id:'cpu4', name:'AMD Ryzen 7 7700X', socket:'AM5', price:350, tdp:105}
      ],
      motherboards: [
        {id:'mb1', name:'ASUS PRIME B660 (LGA1700)', socket:'LGA1700', ramType:'DDR4', price:120},
        {id:'mb2', name:'MSI MAG Z690 (LGA1700)', socket:'LGA1700', ramType:'DDR5', price:260},
        {id:'mb3', name:'Gigabyte B550 (AM4)', socket:'AM4', ramType:'DDR4', price:110},
        {id:'mb4', name:'ASRock X670 (AM5)', socket:'AM5', ramType:'DDR5', price:290}
      ],
      gpus: [
        {id:'gpu1', name:'NVIDIA RTX 4060', vram:'8GB', price:280},
        {id:'gpu2', name:'NVIDIA RTX 4070', vram:'12GB', price:600},
        {id:'gpu3', name:'AMD RX 7600', vram:'8GB', price:230}
      ],
      ram: [
        {id:'ram1', name:'16GB DDR4 (2x8) 3200MHz', type:'DDR4', price:45},
        {id:'ram2', name:'32GB DDR4 (2x16) 3600MHz', type:'DDR4', price:95},
        {id:'ram3', name:'32GB DDR5 (2x16) 5200MHz', type:'DDR5', price:160}
      ],
      storage: [
        {id:'sto1', name:'500GB NVMe SSD', price:45},
        {id:'sto2', name:'1TB NVMe SSD', price:80},
        {id:'sto3', name:'2TB SATA HDD', price:50}
      ],
      psu: [
        {id:'psu1', name:'550W 80+ Bronze', watt:550, price:55},
        {id:'psu2', name:'750W 80+ Gold', watt:750, price:110}
      ],
      case: [
        {id:'case1', name:'NZXT H510', price:80},
        {id:'case2', name:'Cooler Master NR200', price:90}
      ],
      cooler: [
        {id:'cool1', name:'Stock Cooler', price:0},
        {id:'cool2', name:'BeQuiet Dark Rock 4', price:65}
      ]
    };

    const PARTS_ORDER = ['cpus','motherboards','gpus','ram','storage','psu','case','cooler'];

    // state
    let selected = {
      cpus: null, motherboards: null, gpus: null, ram: null, storage: null, psu: null, case: null, cooler: null
    };

    function money(n){return '$'+(Math.round(n*100)/100)}

    function createSelect(partKey, items){
      const wrapper = document.createElement('div'); wrapper.className='part';
      const title = document.createElement('h3'); title.textContent = partKey.charAt(0).toUpperCase()+partKey.slice(1);
      wrapper.appendChild(title);
      const sel = document.createElement('select'); sel.dataset.key = partKey;
      const empty = document.createElement('option'); empty.value=''; empty.textContent='— Select —'; sel.appendChild(empty);
      items.forEach(it=>{
        const opt = document.createElement('option'); opt.value = it.id; opt.textContent = it.name + ' — ' + money(it.price);
        sel.appendChild(opt);
      });
      const meta = document.createElement('div'); meta.className='meta'; meta.textContent='Pick a '+partKey;
      wrapper.appendChild(sel); wrapper.appendChild(meta);
      sel.addEventListener('change', onSelectChange);
      return wrapper;
    }

    function renderComponents(){
      const container = document.getElementById('components'); container.innerHTML='';
      PARTS_ORDER.forEach(key=>{
        const items = DATA[key];
        container.appendChild(createSelect(key, items));
      });
    }

    function onSelectChange(e){
      const key = e.target.dataset.key; const id = e.target.value;
      selected[key] = id ? findById(key, id) : null;
      // If CPU changed, re-evaluate compatible motherboards
      if(key==='cpus'){
        // find motherboard selects and filter options
        filterMotherboards();
      }
      updateNotes(); updateSummary();
    }

    function findById(key,id){return DATA[key].find(x=>x.id===id) || null}

    function filterMotherboards(){
      const cpu = selected['cpus'];
      const selects = document.querySelectorAll('select[data-key="motherboards"]');
      if(!selects.length) return;
      const sel = selects[0];
      // rebuild options keeping selection if possible
      const cur = sel.value;
      sel.innerHTML = '';
      const empty = document.createElement('option'); empty.value=''; empty.textContent='— Select —'; sel.appendChild(empty);
      DATA['motherboards'].forEach(mb=>{
        if(!cpu || mb.socket===cpu.socket){
          const opt=document.createElement('option'); opt.value=mb.id; opt.textContent = mb.name + ' — ' + money(mb.price);
          sel.appendChild(opt);
        }
      });
      // if previously selected is incompatible, clear it
      if(cur){
        const still = Array.from(sel.options).some(o=>o.value===cur);
        if(still){ sel.value = cur; selected['motherboards'] = findById('motherboards', cur); }
        else { selected['motherboards'] = null; }
      }
    }

    function updateNotes(){
      const notes = [];
      const cpu = selected.cpus; const mb = selected.motherboards; const ram = selected.ram;
      if(cpu && mb && cpu.socket !== mb.socket){ notes.push('CPU socket and Motherboard socket do not match.'); }
      if(mb && ram && mb.ramType && ram.type && mb.ramType !== ram.type){ notes.push('Motherboard requires '+mb.ramType+' RAM, but selected RAM is '+ram.type+'.'); }
      // PSU wattage check
      const gpu = selected.gpus; const psu = selected.psu; if(gpu && psu){
        // rough watt estimate: gpu ~ 200-300, cpu tdp + other 150
        const est = (gpu.price>500?300: (gpu.price>250?200:150)) + (selected.cpus?selected.cpus.tdp:65) + 150;
        if(psu.watt && est > psu.watt){ notes.push('Estimated system draw ~'+est+'W — selected PSU is '+psu.watt+'W (might be insufficient).'); }
      }
      const notesEl = document.getElementById('notes'); notesEl.innerHTML = notes.length? ('<ul style="margin:6px 0 0 18px">'+notes.map(n=>'<li>'+n+'</li>').join('')+'</ul>') : 'All good — no major compatibility issues detected.';
    }

    function updateSummary(){
      const list = document.getElementById('selectedList'); list.innerHTML='';
      let subtotal = 0;
      PARTS_ORDER.forEach(key=>{
        const sel = selected[key];
        if(sel){
          subtotal += sel.price || 0;
          const item = document.createElement('div'); item.className='item';
          item.innerHTML = `<div><div style="font-weight:600">${sel.name}</div><div class="small">${key}</div></div><div>${money(sel.price||0)}</div>`;
          list.appendChild(item);
        }
      });
      const tax = +(subtotal*0.14).toFixed(2);
      document.getElementById('subtotal').textContent = money(subtotal);
      document.getElementById('tax').textContent = money(tax);
      document.getElementById('total').textContent = money(subtotal+tax);
    }

    // Save / Load
    function saveBuild(){ localStorage.setItem('pc_builder_saved', JSON.stringify(selected)); alert('Saved locally.'); }
    function loadBuild(){ const raw = localStorage.getItem('pc_builder_saved'); if(!raw) return; try{ const data = JSON.parse(raw); // map ids back to objects
        Object.keys(selected).forEach(k=>{ if(data[k]) selected[k] = findById(k, data[k].id || data[k]); else selected[k]=null });
        // apply selects
        Object.keys(selected).forEach(k=>{ const sel = document.querySelector('select[data-key="'+k+'"]'); if(sel) sel.value = selected[k]?selected[k].id : '' });
        filterMotherboards(); updateNotes(); updateSummary();
      }catch(e){console.error(e)} }

    function exportJSON(){
      const out = {};
      Object.keys(selected).forEach(k=>{ out[k] = selected[k]?{id:selected[k].id,name:selected[k].name,price:selected[k].price}:null });
      const blob = new Blob([JSON.stringify(out, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='pc-build.json'; a.click(); URL.revokeObjectURL(url);
    }

    function importJSON(text){
      try{
        const parsed = JSON.parse(text);
        Object.keys(selected).forEach(k=>{
          if(parsed[k] && parsed[k].id){ const found = findById(k, parsed[k].id); selected[k] = found || null; }
          else selected[k] = null;
        });
        // reflect in selects
        Object.keys(selected).forEach(k=>{ const sel = document.querySelector('select[data-key="'+k+'"]'); if(sel) sel.value = selected[k]?selected[k].id : '' });
        filterMotherboards(); updateNotes(); updateSummary();
      }catch(e){ alert('Invalid JSON'); }
    }

    // Presets
    const PRESETS = {
      budget: {cpus:'cpu3', motherboards:'mb3', gpus:'gpu3', ram:'ram1', storage:'sto2', psu:'psu1', case:'case1', cooler:'cool1'},
      mid: {cpus:'cpu1', motherboards:'mb1', gpus:'gpu1', ram:'ram2', storage:'sto2', psu:'psu2', case:'case2', cooler:'cool2'},
      high: {cpus:'cpu2', motherboards:'mb2', gpus:'gpu2', ram:'ram3', storage:'sto2', psu:'psu2', case:'case2', cooler:'cool2'}
    };

    // init
    renderComponents(); loadBuild(); updateSummary(); updateNotes();

    // events
    document.getElementById('saveBtn').addEventListener('click', saveBuild);
    document.getElementById('resetBtn').addEventListener('click', ()=>{ if(confirm('Reset selection?')){ Object.keys(selected).forEach(k=>selected[k]=null); document.querySelectorAll('select').forEach(s=>s.value=''); updateNotes(); updateSummary(); } });
    document.getElementById('exportBtn').addEventListener('click', exportJSON);
    document.getElementById('importBtn').addEventListener('click', ()=>{ importJSON(document.getElementById('importInput').value); });
    document.getElementById('shareBtn').addEventListener('click', ()=>{ const out = {};
      Object.keys(selected).forEach(k=>{ out[k] = selected[k]?{id:selected[k].id,name:selected[k].name,price:selected[k].price}:null });
      navigator.clipboard && navigator.clipboard.writeText(JSON.stringify(out, null, 2)).then(()=>alert('Copied JSON to clipboard'));
    });
    document.querySelectorAll('[data-preset]').forEach(btn=>btn.addEventListener('click', (e)=>{
      const key = e.target.dataset.preset; const p = PRESETS[key]; Object.keys(p).forEach(k=>{ const sel = document.querySelector('select[data-key="'+k+'"]'); if(sel){ sel.value = p[k]; selected[k] = findById(k, p[k]); }});
      filterMotherboards(); updateNotes(); updateSummary();
    }));

    // small checkout demo
    document.getElementById('checkoutBtn').addEventListener('click', ()=>{
      const missing = PARTS_ORDER.filter(k=>!selected[k]);
      if(missing.length) return alert('Please select: '+missing.join(', '));
      alert('Ready! Total: '+document.getElementById('total').textContent+' — This is a demo (no payment).');
    });

    // Accessibility: allow keyboard quick select
    document.addEventListener('keydown', (e)=>{
      if(e.key === 's' && (e.ctrlKey||e.metaKey)){ e.preventDefault(); saveBuild(); }
    });
  </script>
</body>
</html>
